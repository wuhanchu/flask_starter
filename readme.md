# ğŸš€ Flask Starter

<div align="center">

[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](https://opensource.org/licenses/MIT)
[![Python Version](https://img.shields.io/badge/python-3.8%2B-blue.svg)](https://python.org)
[![Flask](https://img.shields.io/badge/Flask-3.0%2B-green.svg)](https://flask.palletsprojects.com/)
[![Docker](https://img.shields.io/badge/Docker-Ready-blue.svg)](https://docker.com)

**ä¼ä¸šçº§ Flask åç«¯å¼€å‘è„šæ‰‹æ¶**

*åŸºäº Flask çš„æ¨¡å—åŒ–åç«¯æ¡†æ¶ï¼Œé›†æˆä¼ä¸šçº§å¼€å‘ç»„ä»¶ï¼ŒåŠ©åŠ›å¿«é€Ÿæ„å»ºé«˜è´¨é‡ Web æœåŠ¡*

</div>

## ğŸ“‹ ç›®å½•

- [ğŸš€ Flask Starter](#-flask-starter)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [âœ¨ é¡¹ç›®ç‰¹ç‚¹](#-é¡¹ç›®ç‰¹ç‚¹)
  - [ğŸ å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
    - [ğŸ“‹ ç¯å¢ƒè¦æ±‚](#-ç¯å¢ƒè¦æ±‚)
    - [âš¡ å¿«é€Ÿå®‰è£…](#-å¿«é€Ÿå®‰è£…)
    - [ğŸ³ Docker å¿«é€Ÿå¯åŠ¨](#-docker-å¿«é€Ÿå¯åŠ¨)
  - [ğŸ“ é¡¹ç›®ç»“æ„](#-é¡¹ç›®ç»“æ„)
  - [ğŸ—ï¸ æ¶æ„è®¾è®¡](#ï¸-æ¶æ„è®¾è®¡)
  - [âš™ï¸ é…ç½®è¯´æ˜](#ï¸-é…ç½®è¯´æ˜)
  - [ğŸš€ éƒ¨ç½²æŒ‡å—](#-éƒ¨ç½²æŒ‡å—)
  - [ğŸ”§ å¼€å‘æŒ‡å—](#-å¼€å‘æŒ‡å—)
  - [ğŸ“¦ æŠ€æœ¯æ ˆ](#-æŠ€æœ¯æ ˆ)
  - [ğŸ¤ è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)
  - [ğŸ“„ è®¸å¯è¯](#-è®¸å¯è¯)

## âœ¨ é¡¹ç›®ç‰¹ç‚¹

ğŸ¯ **ç°ä»£åŒ–æ¶æ„**
- åŸºäº Flask çš„æ¨¡å—åŒ–æ¶æ„è®¾è®¡
- éµå¾ª RESTful API è®¾è®¡è§„èŒƒ
- æ”¯æŒå¾®æœåŠ¡æ¶æ„æ‹†åˆ†

ğŸ”§ **å¼€ç®±å³ç”¨**
- é›†æˆç”¨æˆ·è®¤è¯å’Œæƒé™ç®¡ç†
- å†…ç½® Sentry é”™è¯¯ç›‘æ§
- æ”¯æŒ Loguru æ—¥å¿—ç®¡ç†
- ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†æœºåˆ¶

ğŸ³ **å®¹å™¨åŒ–æ”¯æŒ**
- Docker å®¹å™¨åŒ–éƒ¨ç½²
- å¤šç¯å¢ƒé…ç½®ç®¡ç†
- å¥åº·æ£€æŸ¥å’Œç›‘æ§

âš¡ **é«˜æ€§èƒ½**
- å¼‚æ­¥ä»»åŠ¡å¤„ç†æ”¯æŒ
- æ•°æ®åº“è¿æ¥æ± ä¼˜åŒ–
- ç¼“å­˜ç­–ç•¥é›†æˆ

ğŸ›¡ï¸ **ä¼ä¸šçº§ç‰¹æ€§**
- å®Œå–„çš„æƒé™æ§åˆ¶ç³»ç»Ÿ
- å¤šç§Ÿæˆ·æ¶æ„æ”¯æŒ
- å®¡è®¡æ—¥å¿—è®°å½•

## ğŸ å¿«é€Ÿå¼€å§‹

### ğŸ“‹ ç¯å¢ƒè¦æ±‚

- **Python**: 3.12 æˆ–æ›´é«˜ç‰ˆæœ¬
- **pip**: æœ€æ–°ç‰ˆæœ¬
- **Docker & Docker Compose**: å¯é€‰ï¼Œç”¨äºå®¹å™¨åŒ–éƒ¨ç½²
- **Git**: ç”¨äºç‰ˆæœ¬æ§åˆ¶

### âš¡ å¿«é€Ÿå®‰è£…

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone https://github.com/wuhanchu/flask_starter.git
   cd flask_starter
   ```

2. **åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ**ï¼ˆæ¨èï¼‰
   ```bash
   python -m venv venv
   source venv/bin/activate  # Linux/macOS
   # æˆ– venv\Scripts\activate  # Windows
   ```

3. **å®‰è£…ä¾èµ–**
   ```bash
   pip install -r requirements.txt
   ```

4. **é…ç½®ç¯å¢ƒå˜é‡**
   ```bash
   cp .env.example .env
   # ç¼–è¾‘ .env æ–‡ä»¶ï¼Œé…ç½®å¿…è¦çš„ç¯å¢ƒå˜é‡
   ```

5. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
   ```bash
   python run.py
   ```

   è®¿é—® http://localhost:5000 æŸ¥çœ‹åº”ç”¨

### ğŸ³ Docker å¿«é€Ÿå¯åŠ¨

1. **ä½¿ç”¨ Docker Compose ä¸€é”®å¯åŠ¨**
   ```bash
   docker-compose up -d
   ```

2. **æˆ–è€…æ„å»ºè‡ªå®šä¹‰é•œåƒ**
   ```bash
   docker build -t flask-starter .
   docker run -p 5000:5000 flask-starter
   ```

## ğŸ“ é¡¹ç›®ç»“æ„

```
flask_starter/
â”œâ”€â”€ ğŸ“„ README.md              # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ ğŸš€ run.py                 # ç¨‹åºå…¥å£æ–‡ä»¶
â”œâ”€â”€ âš™ï¸ config.py              # å…¨å±€é…ç½®æ–‡ä»¶
â”œâ”€â”€ ğŸ“¦ requirements.txt       # é¡¹ç›®ä¾èµ–åŒ…æ¸…å•
â”œâ”€â”€ ğŸ³ Dockerfile             # Docker é•œåƒæ„å»ºæ–‡ä»¶
â”œâ”€â”€ ğŸ“ license.txt            # è®¸å¯è¯æ–‡ä»¶
â”‚
â”œâ”€â”€ ğŸ”Œ extension/             # é€šç”¨æ‰©å±•ç»„ä»¶
â”‚   â””â”€â”€ __init__.py
â”œâ”€â”€ ğŸ§© module/                # ä¸šåŠ¡æ¨¡å—ç›®å½•
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ ...                   # å…¶ä»–ä¸šåŠ¡æ¨¡å—
â”œâ”€â”€ ğŸ“‹ context.py             # åº”ç”¨ä¸Šä¸‹æ–‡ç®¡ç†
â”œâ”€â”€ ğŸ“Š log/                   # æ—¥å¿—æ–‡ä»¶ç›®å½•
â””â”€â”€ ğŸ› ï¸ script/                # è„šæœ¬å·¥å…·ç›®å½•
```

### æ ¸å¿ƒç»„ä»¶è¯´æ˜

- **`run.py`**: åº”ç”¨ç¨‹åºå¯åŠ¨å…¥å£ï¼Œè´Ÿè´£åˆå§‹åŒ– Flask åº”ç”¨å’Œæ¨¡å—
- **`config.py`**: é…ç½®ç®¡ç†ï¼Œæ”¯æŒå¤šç¯å¢ƒé…ç½®ï¼ˆå¼€å‘/æµ‹è¯•/ç”Ÿäº§ï¼‰
- **`extension/`**: æ‰©å±•ç»„ä»¶ç›®å½•ï¼ŒåŒ…å«è‡ªå®šä¹‰çš„ Flask æ‰©å±•
- **`module/`**: ä¸šåŠ¡æ¨¡å—ç›®å½•ï¼Œé‡‡ç”¨æ¨¡å—åŒ–æ¶æ„è®¾è®¡
- **`context.py`**: å…¨å±€åº”ç”¨ä¸Šä¸‹æ–‡ç®¡ç†

## ğŸ—ï¸ æ¶æ„è®¾è®¡

åŸºäº Flask çš„æ¨¡å—åŒ–æ¶æ„ï¼Œéµå¾ª RESTful API è®¾è®¡è§„èŒƒï¼Œé‡‡ç”¨ä¾èµ–æ³¨å…¥å’Œæ’ä»¶åŒ–çš„è®¾è®¡æ¨¡å¼ã€‚

### ğŸ›ï¸ ç³»ç»Ÿæ¶æ„

```
Flask Application
â”œâ”€â”€ ğŸ”§ Flask-Frame (æ ¸å¿ƒæ¡†æ¶)
â”‚   â”œâ”€â”€ ğŸ” æƒé™ç®¡ç† - ç”¨æˆ·è®¤è¯ä¸æˆæƒ
â”‚   â”œâ”€â”€ âš ï¸ é”™è¯¯å¤„ç† - ç»Ÿä¸€å¼‚å¸¸å¤„ç†æœºåˆ¶
â”‚   â””â”€â”€ ğŸ“ æ—¥å¿—ç®¡ç† - è¯·æ±‚è¿½è¸ªä¸å®¡è®¡
â”‚
â”œâ”€â”€ ğŸ”Œ Extensions (æ‰©å±•ç»„ä»¶)
â”‚   â”œâ”€â”€ ğŸ“Š Loguru - ç»“æ„åŒ–æ—¥å¿—è®°å½•
â”‚   â”œâ”€â”€ ğŸ” Sentry - é”™è¯¯ç›‘æ§ä¸æ€§èƒ½è¿½è¸ª
â”‚   â””â”€â”€ âš™ï¸ è‡ªå®šä¹‰æ‰©å±• - ä¸šåŠ¡ç‰¹å®šåŠŸèƒ½
â”‚
â””â”€â”€ ğŸ“¦ Business Modules (ä¸šåŠ¡æ¨¡å—)
    â”œâ”€â”€ ğŸ‘¤ ç”¨æˆ·æ¨¡å— - ç”¨æˆ·ä¿¡æ¯ç®¡ç†
    â”œâ”€â”€ ğŸ’¼ ä¸šåŠ¡æ¨¡å— - æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
    â””â”€â”€ ğŸ”§ å…¶ä»–æ¨¡å— - æ‰©å±•ä¸šåŠ¡åŠŸèƒ½
```

### ğŸ”„ æ¶æ„ç‰¹ç‚¹

- **ğŸ§© æ¨¡å—åŒ–è®¾è®¡**: æ¯ä¸ªåŠŸèƒ½æ¨¡å—ç‹¬ç«‹å¼€å‘å’Œéƒ¨ç½²
- **ğŸ”Œ æ’ä»¶åŒ–æ‰©å±•**: æ”¯æŒåŠ¨æ€åŠ è½½å’Œé…ç½®æ‰©å±•ç»„ä»¶
- **ğŸ“Š ç»Ÿä¸€ç›‘æ§**: é›†æˆæ—¥å¿—ã€é”™è¯¯è¿½è¸ªå’Œæ€§èƒ½ç›‘æ§
- **ğŸ” å®‰å…¨å¯é **: å†…ç½®æƒé™ç®¡ç†å’Œæ•°æ®å®‰å…¨æœºåˆ¶

## âš™ï¸ é…ç½®è¯´æ˜

### ç¯å¢ƒé…ç½®

é¡¹ç›®æ”¯æŒå¤šç¯å¢ƒé…ç½®ï¼Œé€šè¿‡ç¯å¢ƒå˜é‡å’Œé…ç½®ç±»å®ç°ï¼š

- **å¼€å‘ç¯å¢ƒ** (`DevelopmentConfig`): å¯ç”¨è°ƒè¯•æ¨¡å¼ï¼Œè¯¦ç»†æ—¥å¿—è¾“å‡º
- **æµ‹è¯•ç¯å¢ƒ** (`TestingConfig`): æµ‹è¯•ä¸“ç”¨é…ç½®
- **ç”Ÿäº§ç¯å¢ƒ** (`ProductionConfig`): ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–é…ç½®

### ä¸»è¦é…ç½®é¡¹

```python
# åº”ç”¨é…ç½®
PRODUCT_KEY = "flask_starter"           # äº§å“æ ‡è¯†
RUN_PORT = 5000                         # è¿è¡Œç«¯å£

# åŠŸèƒ½æ¨¡å—
ENABLED_EXTENSION = ["loguru", "sentry"] # å¯ç”¨çš„æ‰©å±•
ENABLED_MODULE = []                      # å¯ç”¨çš„ä¸šåŠ¡æ¨¡å—

# å¤–éƒ¨æœåŠ¡
USER_AUTH_URL = "http://127.0.0.1:5000" # ç”¨æˆ·è®¤è¯æœåŠ¡åœ°å€
SENTRY_DS = "your_sentry_dsn"           # Sentry é”™è¯¯è·Ÿè¸ª

# æ•°æ®åº“é…ç½®
SQLALCHEMY_DATABASE_URI = "sqlite:///app.db"  # æ•°æ®åº“è¿æ¥
```

### ç¯å¢ƒå˜é‡

åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå»ºè®®ä½¿ç”¨ç¯å¢ƒå˜é‡è¦†ç›–æ•æ„Ÿé…ç½®ï¼š

```bash
export RUN_PORT=8080
export USER_AUTH_URL=https://auth.example.com
export SENTRY_DS=your_production_sentry_dsn
export SQLALCHEMY_DATABASE_URI=postgresql://user:pass@localhost/db
```

## ğŸš€ éƒ¨ç½²æŒ‡å—

### æœ¬åœ°å¼€å‘éƒ¨ç½²

```bash
# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# è®¾ç½®ç¯å¢ƒå˜é‡
export FLASK_ENV=development
export USER_AUTH_URL=http://localhost:5000

# å¯åŠ¨åº”ç”¨
python run.py
```

### Docker éƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
docker build -t flask-starter:latest .

# è¿è¡Œå®¹å™¨
docker run -d \
  --name flask-starter \
  -p 5000:5000 \
  -e USER_AUTH_URL=http://auth.example.com \
  -e SENTRY_DS=your_sentry_dsn \
  flask-starter:latest
```

### Docker Compose éƒ¨ç½²

```yaml
version: '3.8'
services:
  app:
    build: .
    ports:
      - "5000:5000"
    environment:
      - FLASK_ENV=production
      - USER_AUTH_URL=http://auth.example.com
      - SENTRY_DS=your_sentry_dsn
    volumes:
      - ./logs:/opt/www/log
    restart: unless-stopped
```

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

å»ºè®®ä½¿ç”¨ä»¥ä¸‹é…ç½®è¿›è¡Œç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ï¼š

```bash
# ä½¿ç”¨ Gunicorn ä½œä¸º WSGI æœåŠ¡å™¨
pip install gunicorn

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
gunicorn -w 4 -b 0.0.0.0:5000 run:app
```

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°æ¨¡å—

1. åœ¨ `module/` ç›®å½•ä¸‹åˆ›å»ºæ–°æ¨¡å—ç›®å½•
2. å®ç°æ¨¡å—çš„ `init_app(app)` å‡½æ•°
3. åœ¨ `config.py` ä¸­çš„ `ENABLED_MODULE` åˆ—è¡¨ä¸­æ·»åŠ æ¨¡å—å

ç¤ºä¾‹ï¼š

```python
# module/user/__init__.py
def init_app(app):
    """åˆå§‹åŒ–ç”¨æˆ·æ¨¡å—"""
    from . import routes
    app.register_blueprint(routes.bp)
```

### æ·»åŠ æ–°æ‰©å±•

1. åœ¨ `extension/` ç›®å½•ä¸‹åˆ›å»ºæ‰©å±•æ–‡ä»¶
2. å®ç°æ‰©å±•çš„ `init_app(app)` å‡½æ•°
3. åœ¨ `config.py` ä¸­çš„ `ENABLED_EXTENSION` åˆ—è¡¨ä¸­æ·»åŠ æ‰©å±•å

### API å¼€å‘è§„èŒƒ

```python
from flask import Blueprint, jsonify, request
from flask_frame.util.response import Response

bp = Blueprint('user', __name__, url_prefix='/api/v1/user')

@bp.route('/', methods=['GET'])
def list_users():
    """è·å–ç”¨æˆ·åˆ—è¡¨"""
    try:
        # ä¸šåŠ¡é€»è¾‘
        users = get_users()
        return Response.success(users)
    except Exception as e:
        return Response.error(str(e))
```

### æµ‹è¯•

```bash
# è¿è¡Œæµ‹è¯•
pytest

# ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=./ --cov-report=html
```

## ğŸ“¦ æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶
- **[Flask](https://flask.palletsprojects.com/)** - è½»é‡çº§ Web æ¡†æ¶
- **[Flask-Frame](https://github.com/wuhanchu/flask_frame)** - è‡ªç ” Flask æ‰©å±•æ¡†æ¶

### æ‰©å±•ç»„ä»¶
- **[Loguru](https://github.com/Delgan/loguru)** - ç°ä»£åŒ–æ—¥å¿—è®°å½•
- **[Sentry](https://sentry.io/)** - é”™è¯¯ç›‘æ§å’Œæ€§èƒ½è¿½è¸ª
- **[SQLAlchemy](https://sqlalchemy.org/)** - ORM æ•°æ®åº“å·¥å…·ï¼ˆå¯é€‰ï¼‰

### å¼€å‘å·¥å…·
- **[pytest](https://pytest.org/)** - å•å…ƒæµ‹è¯•æ¡†æ¶
- **[Docker](https://docker.com/)** - å®¹å™¨åŒ–éƒ¨ç½²
- **[Gunicorn](https://gunicorn.org/)** - WSGI HTTP æœåŠ¡å™¨

### ä¾èµ–ç®¡ç†
```bash
# æŸ¥çœ‹å½“å‰ä¾èµ–
pip list

# ç”Ÿæˆä¾èµ–æ–‡ä»¶
pip freeze > requirements.txt

# å®‰å…¨å®¡è®¡
pip-audit
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

### å¼€å‘æµç¨‹

1. **Fork é¡¹ç›®** åˆ°ä½ çš„ GitHub è´¦æˆ·
2. **åˆ›å»ºç‰¹æ€§åˆ†æ”¯**: `git checkout -b feature/amazing-feature`
3. **æäº¤æ›´æ”¹**: `git commit -m 'Add some amazing feature'`
4. **æ¨é€åˆ†æ”¯**: `git push origin feature/amazing-feature`
5. **æäº¤ Pull Request**

### ä»£ç è§„èŒƒ

- éµå¾ª [PEP 8](https://pep8.org/) Python ä»£ç é£æ ¼
- æ·»åŠ é€‚å½“çš„æ–‡æ¡£å­—ç¬¦ä¸²å’Œæ³¨é‡Š
- ä¿æŒæµ‹è¯•è¦†ç›–ç‡ > 80%
- ä½¿ç”¨ç±»å‹æç¤ºï¼ˆPython 3.8+ï¼‰

### æäº¤ä¿¡æ¯è§„èŒƒ

```
<type>(<scope>): <description>

[optional body]

[optional footer]
```

ç±»å‹è¯´æ˜ï¼š
- `feat`: æ–°åŠŸèƒ½
- `fix`: ä¿®å¤ bug
- `docs`: æ–‡æ¡£æ›´æ–°
- `style`: ä»£ç æ ¼å¼åŒ–
- `refactor`: é‡æ„
- `test`: æµ‹è¯•ç›¸å…³
- `chore`: æ„å»º/å·¥å…·ç›¸å…³

### é—®é¢˜åé¦ˆ

å¦‚æœä½ å‘ç°äº† bug æˆ–æœ‰åŠŸèƒ½å»ºè®®ï¼Œè¯·ï¼š

1. æœç´¢ [å·²æœ‰ issues](https://github.com/wuhanchu/flask_starter/issues)
2. å¦‚æœæ²¡æœ‰ç›¸å…³é—®é¢˜ï¼Œ[åˆ›å»ºæ–° issue](https://github.com/wuhanchu/flask_starter/issues/new)
3. è¯¦ç»†æè¿°é—®é¢˜æˆ–å»ºè®®

## ğŸ“„ è®¸å¯è¯

è¯¥é¡¹ç›®åŸºäº MIT è®¸å¯è¯å¼€æºï¼Œè¯¦æƒ…è¯·æŸ¥çœ‹ [LICENSE](license.txt) æ–‡ä»¶ã€‚

```
MIT License

Copyright (c) 2024 wuhanchu

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª Starï¼**

**ğŸ“§ è”ç³»æˆ‘ä»¬**: [whcwuhanchu@gmail.com](mailto:whcwuhanchu@gmail.com)

</div>
